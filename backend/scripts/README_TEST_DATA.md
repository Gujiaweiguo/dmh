# DMH æµ‹è¯•æ•°æ®è¯´æ˜

## ğŸ“‹ æ•°æ®æ¦‚è¿°

æœ¬ç›®å½•åŒ…å« DMH ç³»ç»Ÿçš„å®Œæ•´æµ‹è¯•æ•°æ®ï¼Œç”¨äºå¼€å‘å’Œæµ‹è¯•ç¯å¢ƒã€‚

## ğŸ“‚ æ–‡ä»¶è¯´æ˜

### dmh_test_data_20260131.sql
å®Œæ•´çš„æ•°æ®åº“å¤‡ä»½æ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰è¡¨ç»“æ„å’Œæµ‹è¯•æ•°æ®ã€‚

**åˆ›å»ºæ—¶é—´**: 2026-01-31  
**å­—ç¬¦é›†**: UTF-8 (utf8mb4)  
**æ–‡ä»¶å¤§å°**: 49 KB

## ğŸ“Š æ•°æ®ç»Ÿè®¡

| è¡¨å | è®°å½•æ•° | è¯´æ˜ |
|------|--------|------|
| users | 8 | ç”¨æˆ·æ•°æ®ï¼ˆç®¡ç†å‘˜ã€å“ç‰Œç®¡ç†å‘˜ã€æ™®é€šç”¨æˆ·ã€åˆ†é”€å•†ï¼‰ |
| brands | 5 | å“ç‰Œæ•°æ®ï¼ˆæ˜Ÿå·´å…‹ã€éº¦å½“åŠ³ã€åä¸ºã€å°ç±³ã€è€å…‹ï¼‰ |
| campaigns | 5 | è¥é”€æ´»åŠ¨ï¼ˆ3ä¸ªè¿›è¡Œä¸­ã€1ä¸ªæš‚åœã€1ä¸ªå·²ç»“æŸï¼‰ |
| orders | 6 | è®¢å•æ•°æ®ï¼ˆ4ä¸ªå·²æ”¯ä»˜ã€2ä¸ªå¾…æ”¯ä»˜ï¼‰ |
| rewards | 6 | å¥–åŠ±è®°å½•ï¼ˆ4ä¸ªå·²ç»“ç®—ã€2ä¸ªå¾…ç»“ç®—ï¼‰ |
| withdrawals | 4 | æç°è®°å½•ï¼ˆ2ä¸ªå·²å®Œæˆã€2ä¸ªå¾…å®¡æ ¸ï¼‰ |
| user_roles | 8 | ç”¨æˆ·è§’è‰²å…³è” |
| user_brands | 5 | ç”¨æˆ·å“ç‰Œå…³è” |
| user_balances | 8 | ç”¨æˆ·ä½™é¢ |
| permissions | 13 | æƒé™æ•°æ® |
| role_permissions | 13 | è§’è‰²æƒé™å…³è” |
| menus | 19 | èœå•æ•°æ® |
| role_menus | 19 | è§’è‰²èœå•å…³è” |
| sync_logs | 5 | åŒæ­¥æ—¥å¿— |
| audit_logs | 8 | å®¡è®¡æ—¥å¿— |

## ğŸ‘¤ æµ‹è¯•è´¦å·

### å¹³å°ç®¡ç†å‘˜
| ç”¨æˆ·å | å¯†ç  | çœŸå®å§“å | è§’è‰² | æƒé™ |
|--------|------|----------|------|------|
| admin | 123456 | ç³»ç»Ÿç®¡ç†å‘˜ | platform_admin | æ‹¥æœ‰æ‰€æœ‰æƒé™ |
| æ‰‹æœºå·: 13800000001 | | | | |

### å“ç‰Œç®¡ç†å‘˜
| ç”¨æˆ·å | å¯†ç  | çœŸå®å§“å | è§’è‰² | ç®¡ç†å“ç‰Œ |
|--------|------|----------|------|----------|
| brand_manager | 123456 | å“ç‰Œç»ç† | brand_admin | æ˜Ÿå·´å…‹å’–å•¡ (ID: 1) |
| brand_admin | 123456 | å“ç‰Œç®¡ç†å‘˜ | brand_admin | éº¦å½“åŠ³ (ID: 2) |
| æ‰‹æœºå·: 13800000002, 13800000003 | | | | |

### æ™®é€šç”¨æˆ·
| ç”¨æˆ·å | å¯†ç  | çœŸå®å§“å | è§’è‰² |
|--------|------|----------|------|
| user001 | 123456 | å¼ ä¸‰ | participant |
| user002 | 123456 | æå›› | participant |
| user003 | 123456 | ç‹äº” | participant |
| æ‰‹æœºå·: 13800000004, 13800000005, 13800000006 | | | |

### åˆ†é”€å•†
| ç”¨æˆ·å | å¯†ç  | çœŸå®å§“å | è§’è‰² | å¯æç° | ç´¯è®¡æ”¶ç›Š |
|--------|------|----------|------|--------|----------|
| distributor001 | 123456 | åˆ†é”€å•†ä¸€ | participant | Â¥680.30 | Â¥2,480.30 |
| distributor002 | 123456 | åˆ†é”€å•†äºŒ | participant | Â¥320.75 | Â¥1,200.75 |
| æ‰‹æœºå·: 13800000007, 13800000008 | | | | |

## ğŸ¯ è¥é”€æ´»åŠ¨æ•°æ®

### è¿›è¡Œä¸­çš„æ´»åŠ¨
| ID | å“ç‰Œåç§° | æ´»åŠ¨åç§° | å¥–åŠ±è§„åˆ™ | å¼€å§‹æ—¶é—´ | ç»“æŸæ—¶é—´ |
|----|---------|----------|----------|----------|----------|
| 1 | æ˜Ÿå·´å…‹å’–å•¡ | æ˜Ÿå·´å…‹æ–°å¹´ä¿ƒé”€æ´»åŠ¨ | Â¥15.00 | 2026-01-01 | 2026-12-31 |
| 2 | éº¦å½“åŠ³ | éº¦å½“åŠ³è¶…å€¼å¥—é¤æ¨å¹¿ | Â¥12.00 | 2026-01-15 | 2026-03-31 |
| 3 | åä¸ºç§‘æŠ€ | åä¸ºæ–°å“ä½“éªŒæ´»åŠ¨ | Â¥20.00 | 2026-01-20 | 2026-06-30 |

### æš‚åœ/å·²ç»“æŸçš„æ´»åŠ¨
| ID | å“ç‰Œåç§° | æ´»åŠ¨åç§° | çŠ¶æ€ |
|----|---------|----------|------|
| 4 | æ˜Ÿå·´å…‹å’–å•¡ | æ˜Ÿå·´å…‹æ˜¥å­£ä¿ƒé”€ | paused |
| 5 | éº¦å½“åŠ³ | åŒåä¸€ä¿ƒé”€æ´»åŠ¨ | ended |

## ğŸ’° è®¢å•å’Œå¥–åŠ±æ•°æ®

### å·²æ”¯ä»˜è®¢å• (4ä¸ª)
| è®¢å•ID | æ‰‹æœºå· | é‡‘é¢ | çŠ¶æ€ |
|--------|--------|------|------|
| 1 | 13900001001 | Â¥99.00 | paid |
| 2 | 13900001002 | Â¥199.00 | paid |
| 3 | 13900001003 | Â¥59.00 | paid |
| 4 | 13900001004 | Â¥299.00 | paid |

### å¾…æ”¯ä»˜è®¢å• (2ä¸ª)
| è®¢å•ID | æ‰‹æœºå· | é‡‘é¢ | çŠ¶æ€ |
|--------|--------|------|------|
| 5 | 13900001005 | Â¥99.00 | pending |
| 6 | 13900001006 | Â¥59.00 | pending |

### å·²ç»“ç®—å¥–åŠ± (4ä¸ª)
| å¥–åŠ±ID | åˆ†é”€å•† | è®¢å•ID | é‡‘é¢ | ç»“ç®—æ—¶é—´ |
|--------|--------|--------|------|----------|
| 1 | åˆ†é”€å•†ä¸€ | 1 | Â¥15.00 | 2026-01-30 10:00:00 |
| 2 | åˆ†é”€å•†ä¸€ | 2 | Â¥15.00 | 2026-01-30 11:00:00 |
| 3 | åˆ†é”€å•†äºŒ | 3 | Â¥12.00 | 2026-01-30 12:00:00 |
| 4 | åˆ†é”€å•†ä¸€ | 4 | Â¥20.00 | 2026-01-30 13:00:00 |

### å¾…ç»“ç®—å¥–åŠ± (2ä¸ª)
| å¥–åŠ±ID | åˆ†é”€å•† | è®¢å•ID | é‡‘é¢ |
|--------|--------|--------|------|
| 5 | åˆ†é”€å•†ä¸€ | 5 | Â¥15.00 |
| 6 | åˆ†é”€å•†äºŒ | 6 | Â¥12.00 |

## ğŸ’³ æç°è®°å½•

### å·²å®Œæˆæç° (2ä¸ª)
| ID | ç”¨æˆ· | é‡‘é¢ | æç°æ–¹å¼ | è´¦å·ä¿¡æ¯ | å®¡æ‰¹äºº |
|----|------|------|----------|----------|--------|
| 1 | åˆ†é”€å•†ä¸€ | Â¥500.00 | å·¥å•†é“¶è¡Œ | 6222****1234 | å“ç‰Œç»ç† |
| 2 | åˆ†é”€å•†ä¸€ | Â¥300.00 | æ”¯ä»˜å® | alipay123@dmh.com | å“ç‰Œç»ç† |

### å¾…å®¡æ ¸æç° (2ä¸ª)
| ID | ç”¨æˆ· | é‡‘é¢ | æç°æ–¹å¼ | è´¦å·ä¿¡æ¯ |
|----|------|------|----------|----------|
| 3 | åˆ†é”€å•†äºŒ | Â¥200.00 | å¾®ä¿¡æ”¯ä»˜ | wxid123456 |
| 4 | å“ç‰Œç»ç† | Â¥1,000.00 | å»ºè®¾é“¶è¡Œ | 6217****5678 |

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•1: å®Œæ•´æ•°æ®åº“æ¢å¤
```bash
# å¤‡ä»½å½“å‰æ•°æ®åº“
docker exec mysql8 mysqldump -uroot -p"Admin168" dmh > /tmp/dmh_backup_$(date +%Y%m%d_%H%M%S).sql

# æ¢å¤æµ‹è¯•æ•°æ®
docker exec -i mysql8 mysql -uroot -p"Admin168" --default-character-set=utf8mb4 dmh < /opt/code/DMH/backend/scripts/dmh_test_data_20260131.sql
```

### æ–¹æ³•2: ä»…æ¢å¤æ•°æ®ï¼ˆä¿ç•™è¡¨ç»“æ„ï¼‰
```bash
# åˆ›å»ºä¸´æ—¶SQLæ–‡ä»¶
grep -E "^INSERT INTO" /opt/code/DMH/backend/scripts/dmh_test_data_20260131.sql > /tmp/insert_data_only.sql

# æ¸…ç©ºå¹¶é‡æ–°æ’å…¥æ•°æ®
docker exec -i mysql8 mysql -uroot -p"Admin168" --default-character-set=utf8mb4 dmh < /tmp/insert_data_only.sql
```

### æ–¹æ³•3: é‡æ–°åˆå§‹åŒ–æ•°æ®åº“
```bash
# åˆ é™¤å¹¶é‡å»ºæ•°æ®åº“
docker exec mysql8 mysql -uroot -p"Admin168" -e "DROP DATABASE IF EXISTS dmh; CREATE DATABASE dmh DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"

# è¿è¡Œåˆå§‹åŒ–è„šæœ¬
docker exec -i mysql8 mysql -uroot -p"Admin168" --default-character-set=utf8mb4 dmh < /opt/code/DMH/backend/scripts/init.sql

# å¯¼å…¥æµ‹è¯•æ•°æ®
docker exec -i mysql8 mysql -uroot -p"Admin168" --default-character-set=utf8mb4 dmh < /opt/code/DMH/backend/scripts/dmh_test_data_20260131.sql
```

## âœ… éªŒè¯æ•°æ®

### æ£€æŸ¥æ•°æ®ç»Ÿè®¡
```bash
docker exec mysql8 mysql -uroot -p"Admin168" -D dmh -e "
SELECT 
    (SELECT COUNT(*) FROM users) as users,
    (SELECT COUNT(*) FROM brands) as brands,
    (SELECT COUNT(*) FROM campaigns) as campaigns,
    (SELECT COUNT(*) FROM orders) as orders,
    (SELECT COUNT(*) FROM rewards) as rewards;
"
```

### æµ‹è¯•APIæ¥å£
```bash
# ç™»å½•è·å–Token
TOKEN=$(curl -X POST http://localhost:8889/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"123456"}' \
  -s | jq -r '.token')

# è·å–å“ç‰Œåˆ—è¡¨
curl -X GET http://localhost:8889/api/v1/brands \
  -H "Authorization: Bearer $TOKEN" \
  -s | jq '.'

# è·å–æ´»åŠ¨åˆ—è¡¨
curl -X GET http://localhost:8889/api/v1/campaigns \
  -H "Authorization: Bearer $TOKEN" \
  -s | jq '.'
```

## ğŸ” å¯†ç è¯´æ˜

æ‰€æœ‰æµ‹è¯•è´¦å·çš„å¯†ç ç»Ÿä¸€ä¸º: `123456`

å¯†ç å“ˆå¸Œç®—æ³•: BCrypt  
åŸå§‹å¯†ç : `123456`  
å“ˆå¸Œå€¼: `$2a$10$iL5hmpD0wGKSkRDCY92TL.y8wGarBWmnqVoFYlRxLM7xr0eSCzPEm`

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **å­—ç¬¦é›†**: æµ‹è¯•æ•°æ®ä½¿ç”¨ UTF-8 (utf8mb4) ç¼–ç ï¼Œå¯¼å…¥æ—¶å¿…é¡»æŒ‡å®š `--default-character-set=utf8mb4`
2. **å¤–é”®çº¦æŸ**: æŸäº›æ“ä½œå¯èƒ½éœ€è¦æš‚æ—¶ç¦ç”¨å¤–é”®æ£€æŸ¥
3. **æ•°æ®å®Œæ•´æ€§**: æµ‹è¯•æ•°æ®åŒ…å«å®Œæ•´çš„å…³è”å…³ç³»ï¼ˆç”¨æˆ·-å“ç‰Œã€è®¢å•-æ´»åŠ¨ã€å¥–åŠ±-è®¢å•ç­‰ï¼‰
4. **æ—¶é—´æ•°æ®**: æ‰€æœ‰æ—¶é—´æˆ³ä½¿ç”¨ MySQL çš„ NOW() å‡½æ•°ï¼Œæ¢å¤æ—¶ä¼šæ›´æ–°ä¸ºå½“å‰æ—¶é—´
5. **éšç§æ•°æ®**: æµ‹è¯•æ•°æ®ä¸­çš„æ‰‹æœºå·ã€é‚®ç®±å‡ä¸ºè™šæ„æ•°æ®ï¼Œä»…ç”¨äºæµ‹è¯•

## ğŸ”„ æ›´æ–°å†å²

- **2026-01-31**: åˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å«å®Œæ•´çš„æµ‹è¯•æ•°æ®

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿæˆ–æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£ã€‚

---

**æœ€åæ›´æ–°**: 2026-01-31
**ç»´æŠ¤è€…**: DMH å¼€å‘å›¢é˜Ÿ
