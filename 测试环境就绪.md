# 🚀 DMH 数字营销中台 - 测试环境已就绪

## 📌 系统访问地址

| 服务 | 地址 | 状态 |
|------|------|------|
| **后端 API** | http://localhost:8888 | 待启动 |
| **前端管理后台** | http://localhost:5173 | 待启动 |
| **H5 端** | http://localhost:3000 | 待启动 |

## 🔐 测试账号信息

### 1️⃣ 平台管理员
| 项目 | 内容 |
|------|------|
| **用户名** | `admin` |
| **密码** | `123456` |
| **角色** | 平台管理员 (platform_admin) |
| **手机号** | 13800000001 |
| **状态** | ✅ active |
| **权限** | 系统所有权限 |

**访问地址：** http://localhost:5173

**主要功能：**
- 📊 查看全局统计数据
- 👥 管理所有用户
- 🏢 管理所有品牌
- 📦 查看所有活动
- 💰 分销管理：
  - 全局分销商查询
  - 全局奖励查询
  - 全局提现查询
  - 提现审批
- ⚙️ 系统管理

---

### 2️⃣ 品牌管理员
| 项目 | 内容 |
|------|------|
| **用户名** | `brand_manager` |
| **密码** | `123456` |
| **角色** | 品牌管理员 (brand_admin) |
| **手机号** | 13800000002 |
| **管理品牌** | 品牌A (ID: 1) |
| **状态** | ✅ active |

**访问地址：** http://localhost:5173

**主要功能：**
- 📊 查看品牌数据统计
- 🏢 管理品牌信息
- 📦 活动管理：
  - 创建/编辑活动
  - 配置分销规则
  - 启用/禁用分销
  - 设置分销层级（1-3级）
  - 设置各级奖励比例
- 📦 订单管理
- 💰 分销管理：
  - 分销商管理
  - 顾客列表
  - 奖励详情

---

### 3️⃣ 一级分销商
| 项目 | 内容 |
|------|------|
| **用户名** | `distributor1` |
| **密码** | `123456` |
| **角色** | 分销商 (distributor) |
| **手机号** | 13900000001 |
| **品牌** | 品牌A |
| **级别** | 一级 (Level 1) |
| **余额** | ¥500.00 |
| **累计收益** | ¥90.00 |
| **下级数量** | 2人 |
| **状态** | ✅ active |

**访问地址：** http://localhost:3000

**主要功能：**
- 💎 分销中心：
  - 查看推广数据统计
  - 查看奖励明细
  - 查看下级列表
  - 申请提现
  - 查看提现记录
- 🎯 推广页面：
  - 生成活动专属海报
  - 生成通用分销商海报
  - 获取推广链接和二维码

---

### 4️⃣ 二级分销商
| 项目 | 内容 |
|------|------|
| **用户名** | `distributor2` |
| **密码** | `123456` |
| **角色** | 分销商 (distributor) |
| **手机号** | 13900000002 |
| **品牌** | 品牌A |
| **级别** | 二级 (Level 2) |
| **上级** | distributor1 (一级分销商) |
| **余额** | ¥200.00 |
| **累计收益** | ¥35.00 |
| **下级数量** | 1人 |
| **状态** | ✅ active |

**访问地址：** http://localhost:3000

---

### 5️⃣ 三级分销商
| 项目 | 内容 |
|------|------|
| **用户名** | `distributor3` |
| **密码** | `123456` |
| **角色** | 分销商 (distributor) |
| **手机号** | 13900000003 |
| **品牌** | 品牌A |
| **级别** | 三级 (Level 3) |
| **上级** | distributor2 (二级分销商) |
| **余额** | ¥100.00 |
| **累计收益** | ¥12.00 |
| **下级数量** | 0人 |
| **状态** | ✅ active |

**访问地址：** http://localhost:3000

---

### 6️⃣ 普通用户1
| 项目 | 内容 |
|------|------|
| **用户名** | `participant1` |
| **密码** | `123456` |
| **角色** | 参与者 (participant) |
| **手机号** | 13900000004 |
| **品牌** | 品牌A |
| **余额** | ¥0.00 |
| **状态** | ✅ active |

**访问地址：** http://localhost:3000

**主要功能：**
- 📦 参与活动
- 🛒 下单支付
- 📊 查看订单
- 💰 支付后自动成为分销商

---

### 7️⃣ 普通用户2
| 项目 | 内容 |
|------|------|
| **用户名** | `participant2` |
| **密码** | `123456` |
| **角色** | 参与者 (participant) |
| **手机号** | 13900000005 |
| **品牌** | 品牌A |
| **余额** | ¥0.00 |
| **状态** | ✅ active |

**访问地址：** http://localhost:3000

---

## 🌳 分销链结构

```
distributor1 (一级分销商)
  ├── distributor2 (二级分销商)
  │    └── distributor3 (三级分销商)
  └── 待添加...
```

**说明：**
- `distributor1` 是一级分销商，有2个下级
- `distributor2` 是二级分销商，上级是 distributor1，有1个下级
- `distributor3` 是三级分销商，上级是 distributor2，暂无下级

---

## 📋 测试数据概览

### 分销商汇总

| 分销商 | 级别 | 余额 | 累计收益 | 下级数 | 状态 |
|--------|------|------|----------|--------|------|
| distributor1 | 一级 | ¥500.00 | ¥90.00 | 2 | active |
| distributor2 | 二级 | ¥200.00 | ¥35.00 | 1 | active |
| distributor3 | 三级 | ¥100.00 | ¥12.00 | 0 | active |

### 用户余额

| 用户名 | 角色 | 余额 |
|--------|------|------|
| distributor1 | 分销商 | ¥500.00 |
| distributor2 | 分销商 | ¥200.00 |
| distributor3 | 分销商 | ¥100.00 |
| participant1 | 参与者 | ¥0.00 |
| participant2 | 参与者 | ¥0.00 |

---

## 📖 系统启动步骤

### 1. 启动后端 API
```bash
cd /opt/code/DMH/backend/api
go run dmh.go
```

✅ **启动成功后访问：** http://localhost:8888

---

### 2. 启动前端管理后台
```bash
cd /opt/code/DMH/frontend-admin
npm install  # 首次运行需要安装依赖
npm run dev
```

✅ **启动成功后访问：** http://localhost:5173

---

### 3. 启动 H5 端
```bash
cd /opt/code/DMH/frontend-h5
npm install  # 首次运行需要安装依赖
npm start
```

✅ **启动成功后访问：** http://localhost:3000

---

## 🎯 测试场景建议

### 1. 测试自动升级为分销商
1. 使用 `participant1` 登录 H5 端
2. 参与活动并下单支付
3. 支付成功后，用户自动成为分销商
4. 使用新分销商账号登录，查看分销中心

---

### 2. 测试分销推广流程
1. 使用 `distributor1` 登录 H5 端
2. 进入"推广"页面
3. 生成活动海报或推广链接
4. 分享给其他用户
5. 其他用户通过链接下单，自动建立分销关系

---

### 3. 测试多级奖励分配
1. 用户通过 `distributor3` 的推广链接下单
2. 验证奖励分配：
   - distributor1 (一级) 获得奖励
   - distributor2 (二级) 获得奖励
   - distributor3 (三级) 获得奖励

---

### 4. 测试提现申请流程
1. 使用 `distributor1` 登录 H5 端
2. 进入"提现"页面
3. 输入提现金额、选择提现方式
4. 提交提现申请
5. 查看提现记录

---

### 5. 测试提现审批流程（平台管理员）
1. 使用 `admin` 登录管理后台
2. 进入"提现审批"页面
3. 查看待审批提现列表
4. 选择提现申请进行审批
5. 填写审批备注或拒绝原因

---

### 6. 测试品牌管理员管理分销商
1. 使用 `brand_manager` 登录管理后台
2. 进入"分销商管理"页面
3. 查看本品牌分销商列表
4. 调整分销商级别
5. 暂停/激活分销商
6. 查看顾客列表
7. 查看奖励详情

---

### 7. 测试平台管理员查看全局数据
1. 使用 `admin` 登录管理后台
2. 进入"全局分销商"页面
3. 按品牌筛选查看分销商
4. 进入"全局奖励"页面
5. 进入"全局提现"页面
6. 查看全局统计

---

## 🔍 查看数据库

### 连接数据库
```bash
# 通过Docker容器连接
docker exec -it mysql8 mysql -uroot -p'#Admin168' dmh
```

### 常用查询
```sql
-- 查看所有用户
SELECT * FROM users;

-- 查看所有分销商
SELECT d.*, u.username, u.real_name
FROM distributors d
LEFT JOIN users u ON d.user_id = u.id;

-- 查看所有订单
SELECT * FROM orders;

-- 查看所有奖励
SELECT * FROM distributor_rewards;

-- 查看所有提现申请
SELECT * FROM withdrawals;
```

---

## 📝 系统配置

### MySQL 配置
- **容器名：** mysql8
- **用户名：** root
- **密码：** #Admin168
- **数据库：** dmh
- **端口映射：** 3306:3306

---

## 🆘 常见问题

### 1. 登录失败
- ✅ 确认用户名和密码正确
- ✅ 确认用户状态为 active
- ✅ 确认用户角色正确

### 2. 数据连接失败
- ✅ 检查 MySQL 容器是否运行：`docker ps`
- ✅ 检查数据库连接配置

### 3. 端口被占用
- ✅ 检查 8888, 5173, 3000 端口是否被占用
- ✅ 使用 `lsof -i :端口` 查看

---

## 🎉 准备就绪

数据库初始化完成，测试数据已导入！🎊

现在可以：
1. ✅ 启动后端 API
2. ✅ 启动前端管理后台
3. ✅ 启动 H5 端
4. ✅ 开始测试分销商系统

---

**祝测试顺利！** 🚀
