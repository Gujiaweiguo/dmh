# DMH 数字营销中台 - 全面用户测试计划

## 📋 测试目标

对 DMH 系统的所有功能模块进行全面的端到端用户测试，确保系统功能完整、稳定、可用。

**测试范围**：
- 前端-H5（普通用户端）
- 前端-Admin（管理后台）
- 后端 API（所有接口）

**测试方法**：
- Playwright MCP 自动化测试
- curl 直接 API 测试
- 人工验证关键业务流程

---

## 🎯 功能模块清单

### 按优先级分类

| 优先级 | 模块 | 状态 | 测试复杂度 |
|--------|------|------|-----------|
| P0 | 用户认证系统 | ⏸️ 未测试 | 中 |
| P0 | 营销活动管理 | ⏸️ 未测试 | 高 |
| P0 | 订单/报名管理 | ⏸️ 未测试 | 高 |
| P0 | 分销系统 | ⏸️ 未测试 | 高 |
| P1 | 品牌管理 | ⏸️ 未测试 | 中 |
| P1 | 会员管理 | ⏸️ 未测试 | 中 |
| P1 | RBAC权限管理 | ⏸️ 未测试 | 高 |
| P1 | 海报生成 | ⏸️ 未测试 | 中 |
| P1 | 页面设计器 | ⏸️ 未测试 | 高 |
| P2 | 数据统计 | ⏸️ 未测试 | 中 |
| P2 | 提现管理 | ⏸️ 未测试 | 中 |
| P2 | 安全审计 | ⏸️ 未测试 | 中 |
| P1 | 反馈系统 | ✅ 已测试 | 中 |

**已测试模块**：1/13 (7.7%)
**未测试模块**：12/13 (92.3%)

---

## 📅 测试执行计划

### 阶段 1：用户认证与基础功能（第1天，8小时）

#### 1.1 用户注册与登录（2小时）

**H5 端测试**：
- [ ] 场景 1.1.1: 手机号注册成功
- [ ] 场景 1.1.2: 邮箱注册成功
- [ ] 场景 1.1.3: 用户名已存在验证
- [ ] 场景 1.1.4: 手机号已存在验证
- [ ] 场景 1.1.5: 密码强度验证
- [ ] 场景 1.1.6: 验证码发送与验证
- [ ] 场景 1.1.7: 登录成功（手机号+密码）
- [ ] 场景 1.1.8: 登录成功（邮箱+密码）
- [ ] 场景 1.1.9: 登录失败（错误密码）
- [ ] 场景 1.1.10: Token 自动刷新

**Admin 端测试**：
- [ ] 场景 1.1.11: 管理员登录成功
- [ ] 场景 1.1.12: 品牌管理员登录
- [ ] 场景 1.1.13: 分销商登录
- [ ] 场景 1.1.14: 登录失败处理

#### 1.2 个人信息管理（1小时）

**H5 端测试**：
- [ ] 场景 1.2.1: 查看个人信息
- [ ] 场景 1.2.2: 修改昵称/头像
- [ ] 场景 1.2.3: 绑定手机号
- [ ] 场景 1.2.4: 绑定邮箱
- [ ] 场景 1.2.5: 修改密码
- [ ] 场景 1.2.6: 查看我的订单

#### 1.3 用户管理（Admin）（2小时）

**Admin 端测试**：
- [ ] 场景 1.3.1: 查看用户列表
- [ ] 场景 1.3.2: 创建新用户
- [ ] 场景 1.3.3: 编辑用户信息
- [ ] 场景 1.3.4: 禁用/启用用户
- [ ] 场景 1.3.5: 重置用户密码
- [ ] 场景 1.3.6: 分配用户角色
- [ ] 场景 1.3.7: 删除用户
- [ ] 场景 1.3.8: 批量操作用户

#### 1.4 RBAC 权限管理（3小时）

**Admin 端测试**：
- [ ] 场景 1.4.1: 查看角色列表
- [ ] 场景 1.4.2: 创建新角色
- [ ] 场景 1.4.3: 编辑角色
- [ ] 场景 1.4.4: 删除角色
- [ ] 场景 1.4.5: 配置角色权限
- [ ] 场景 1.4.6: 查看权限列表
- [ ] 场景 1.4.7: 查看菜单列表
- [ ] 场景 1.4.8: 创建菜单
- [ ] 场景 1.4.9: 编辑菜单
- [ ] 场景 1.4.10: 删除菜单
- [ ] 场景 1.4.11: 配置角色菜单
- [ ] 场景 1.4.12: 权限验证测试

---

### 阶段 2：品牌与活动管理（第2天，8小时）

#### 2.1 品牌管理（2小时）

**Admin 端测试**：
- [ ] 场景 2.1.1: 查看品牌列表
- [ ] 场景 2.1.2: 创建新品牌
- [ ] 场景 2.1.3: 编辑品牌信息
- [ ] 场景 2.1.4: 上传品牌 Logo
- [ ] 场景 2.1.5: 禁用/启用品牌
- [ ] 场景 2.1.6: 查看品牌详情
- [ ] 场景 2.1.7: 品牌统计分析

#### 2.2 品牌素材管理（1小时）

**Admin 端测试**：
- [ ] 场景 2.2.1: 查看素材列表
- [ ] 场景 2.2.2: 上传图片素材
- [ ] 场景 2.2.3: 上传视频素材
- [ ] 场景 2.2.4: 编辑素材信息
- [ ] 场景 2.2.5: 删除素材
- [ ] 场景 2.2.6: 素材分类管理

#### 2.3 营销活动管理（3小时）

**Admin 端测试**：
- [ ] 场景 2.3.1: 查看活动列表
- [ ] 场景 2.3.2: 创建基础活动
- [ ] 场景 2.3.3: 设置活动时间
- [ ] 场景 2.3.4: 配置报名奖励
- [ ] 场景 2.3.5: 设置动态表单字段
- [ ] 场景 2.3.6: 发布活动
- [ ] 场景 2.3.7: 编辑活动
- [ ] 场景 2.3.8: 暂停/恢复活动
- [ ] 场景 2.3.9: 结束活动
- [ ] 场景 2.3.10: 删除活动
- [ ] 场景 2.3.11: 查看活动统计
- [ ] 场景 2.3.12: 导出活动数据

#### 2.4 页面设计器（2小时）

**Admin 端测试**：
- [ ] 场景 2.4.1: 进入页面设计器
- [ ] 场景 2.4.2: 添加横幅组件
- [ ] 场景 2.4.3: 添加文本组件
- [ ] 场景 2.4.4: 添加图片组件
- [ ] 场景 2.4.5: 添加视频组件
- [ ] 场景 2.4.6: 添加倒计时组件
- [ ] 场景 2.4.7: 添加用户评价组件
- [ ] 场景 2.4.8: 添加 FAQ 组件
- [ ] 场景 2.4.9: 调整组件顺序
- [ ] 场景 2.4.10: 删除组件
- [ ] 场景 2.4.11: 选择主题
- [ ] 场景 2.4.12: 自定义颜色
- [ ] 场景 2.4.13: 保存页面配置
- [ ] 场景 2.4.14: 预览页面效果

---

### 阶段 3：订单与报名管理（第3天，8小时）

#### 3.1 活动浏览与报名（H5）（2小时）

**H5 端测试**：
- [ ] 场景 3.1.1: 浏览活动列表
- [ ] 场景 3.1.2: 筛选活动（状态、类型）
- [ ] 场景 3.1.3: 搜索活动
- [ ] 场景 3.1.4: 查看活动详情
- [ ] 场景 3.1.5: 查看活动页面
- [ ] 场景 3.1.6: 填写报名表单
- [ ] 场景 3.1.7: 提交报名
- [ ] 场景 3.1.8: 表单验证

#### 3.2 支付流程（2小时）

**H5 端测试**：
- [ ] 场景 3.2.1: 查看支付二维码
- [ ] 场景 3.2.2: 扫描二维码支付
- [ ] 场景 3.2.3: 支付成功回调
- [ ] 场景 3.2.4: 支付失败处理
- [ ] 场景 3.2.5: 查看支付状态
- [ ] 场景 3.2.6: 查看我的订单
- [ ] 场景 3.2.7: 查看订单详情

#### 3.3 订单管理（Admin）（2小时）

**Admin 端测试**：
- [ ] 场景 3.3.1: 查看订单列表
- [ ] 场景 3.3.2: 筛选订单（状态、活动）
- [ ] 场景 3.3.3: 搜索订单
- [ ] 场景 3.3.4: 查看订单详情
- [ ] 场景 3.3.5: 导出订单数据
- [ ] 场景 3.3.6: 查看支付记录
- [ ] 场景 3.3.7: 退款处理

#### 3.4 核销管理（2小时）

**H5 端测试**：
- [ ] 场景 3.4.1: 查看核销二维码
- [ ] 场景 3.4.2: 查看核销记录

**Admin/H5 端测试**：
- [ ] 场景 3.4.3: 扫描订单二维码
- [ ] 场景 3.4.4: 输入核销码核销
- [ ] 场景 3.4.5: 核销成功
- [ ] 场景 3.4.6: 重复核销提示
- [ ] 场景 3.4.7: 查看核销记录
- [ ] 场景 3.4.8: 取消核销

---

### 阶段 4：分销系统（第4天，8小时）

#### 4.1 分销员申请与管理（2小时）

**H5 端测试**：
- [ ] 场景 4.1.1: 申请成为分销员
- [ ] 场景 4.1.2: 查看申请状态
- [ ] 场景 4.1.3: 进入分销中心
- [ ] 场景 4.1.4: 查看分销统计
- [ ] 场景 4.1.5: 查看分销奖励

**Admin 端测试**：
- [ ] 场景 4.1.6: 查看分销员申请列表
- [ ] 场景 4.1.7: 审批分销员申请（通过）
- [ ] 场景 4.1.8: 审批分销员申请（拒绝）
- [ ] 场景 4.1.9: 查看分销员列表
- [ ] 场景 4.1.10: 编辑分销员等级
- [ ] 场景 4.1.11: 禁用/启用分销员

#### 4.2 分销推广（2小时）

**H5 端测试**：
- [ ] 场景 4.2.1: 生成分销链接
- [ ] 场景 4.2.2: 复制分销链接
- [ ] 场景 4.2.3: 生成推广海报
- [ ] 场景 4.2.4: 分享海报到微信
- [ ] 场景 4.2.5: 查看推广效果
- [ ] 场景 4.2.6: 查看下线列表
- [ ] 场景 4.2.7: 查看下线详情

#### 4.3 分销奖励（2小时）

**H5 端测试**：
- [ ] 场景 4.3.1: 查看奖励明细
- [ ] 场景 4.3.2: 筛选奖励（类型、时间）
- [ ] 场景 4.3.3: 查看余额
- [ ] 场景 4.3.4: 查看累计收益

**Admin 端测试**：
- [ ] 场景 4.3.5: 查看所有奖励记录
- [ ] 场景 4.3.6: 配置分销等级奖励
- [ ] 场景 4.3.7: 修改分销规则

#### 4.4 提现管理（2小时）

**H5 端测试**：
- [ ] 场景 4.4.1: 申请提现
- [ ] 场景 4.4.2: 提现金额验证
- [ ] 场景 4.4.3: 选择提现方式
- [ ] 场景 4.4.4: 余额不足提示
- [ ] 场景 4.4.5: 查看提现记录
- [ ] 场景 4.4.6: 查看提现状态

**Admin 端测试**：
- [ ] 场景 4.4.7: 查看提现申请列表
- [ ] 场景 4.4.8: 审批提现（通过）
- [ ] 场景 4.4.9: 审批提现（拒绝）
- [ ] 场景 4.4.10: 标记已打款
- [ ] 场景 4.4.11: 查看提现统计

---

### 阶段 5：会员与海报系统（第5天，8小时）

#### 5.1 会员管理（3小时）

**Admin 端测试**：
- [ ] 场景 5.1.1: 查看会员列表
- [ ] 场景 5.1.2: 筛选会员（等级、状态）
- [ ] 场景 5.1.3: 搜索会员
- [ ] 场景 5.1.4: 查看会员详情
- [ ] 场景 5.1.5: 编辑会员信息
- [ ] 场景 5.1.6: 调整会员等级
- [ ] 场景 5.1.7: 禁用/启用会员
- [ ] 场景 5.1.8: 查看会员订单
- [ ] 场景 5.1.9: 查看会员统计

#### 5.2 海报生成（3小时）

**H5 端测试**：
- [ ] 场景 5.2.1: 选择海报模板
- [ ] 场景 5.2.2: 自定义海报内容
- [ ] 场景 5.2.3: 上传海报图片
- [ ] 场景 5.2.4: 生成活动海报
- [ ] 场景 5.2.5: 生成分销海报
- [ ] 场景 5.2.6: 下载海报
- [ ] 场景 5.2.7: 分享海报
- [ ] 场景 5.2.8: 查看海报记录

**Admin 端测试**：
- [ ] 场景 5.2.9: 管理海报模板
- [ ] 场景 5.2.10: 上传海报模板
- [ ] 场景 5.2.11: 配置海报参数

#### 5.3 数据统计（2小时）

**Admin 端测试**：
- [ ] 场景 5.3.1: 查看仪表板概览
- [ ] 场景 5.3.2: 查看用户增长趋势
- [ ] 场景 5.3.3: 查看活动参与统计
- [ ] 场景 5.3.4: 查看收入统计
- [ ] 场景 5.3.5: 查看转化率
- [ ] 场景 5.3.6: 查看分销统计
- [ ] 场景 5.3.7: 导出统计数据
- [ ] 场景 5.3.8: 数据筛选（时间范围）

---

### 阶段 6：反馈系统与审计（第6天，4小时）

#### 6.1 反馈系统（2小时）

**状态**：✅ 已在前期完成测试

**已测试场景**：
- ✅ 提交反馈（匿名用户）
- ✅ 反馈列表查看
- ✅ FAQ 浏览

**待测试场景**：
- [ ] 场景 6.1.1: Admin 查看反馈统计
- [ ] 场景 6.1.2: Admin 查看反馈列表
- [ ] 场景 6.1.3: Admin 查看反馈详情
- [ ] 场景 6.1.4: Admin 回复反馈
- [ ] 场景 6.1.5: Admin 更新反馈状态
- [ ] 场景 6.1.6: Admin 分配反馈处理人
- [ ] 场景 6.1.7: 添加 FAQ
- [ ] 场景 6.1.8: 编辑 FAQ
- [ ] 场景 6.1.9: 删除 FAQ
- [ ] 场景 6.1.10: 标记 FAQ 有用

#### 6.2 安全审计（2小时）

**Admin 端测试**：
- [ ] 场景 6.2.1: 查看审计日志
- [ ] 场景 6.2.2: 筛选审计日志（类型、用户、时间）
- [ ] 场景 6.2.3: 查看登录尝试记录
- [ ] 场景 6.2.4: 查看密码策略
- [ ] 场景 6.2.5: 修改密码策略
- [ ] 场景 6.2.6: 查看活跃 Session
- [ ] 场景 6.2.7: 强制登出用户
- [ ] 场景 6.2.8: 查看安全事件

---

### 阶段 7：集成测试与回归（第7天，8小时）

#### 7.1 跨模块集成测试（4小时）

**集成场景 1**：用户注册 → 参与活动 → 报名 → 支付 → 核销
- [ ] 步骤 1: 新用户注册
- [ ] 步骤 2: 浏览活动列表
- [ ] 步骤 3: 查看活动详情
- [ ] 步骤 4: 填写报名表单
- [ ] 步骤 5: 提交报名
- [ ] 步骤 6: 完成支付
- [ ] 步骤 7: 查看订单
- [ ] 步骤 8: 扫码核销

**集成场景 2**：创建活动 → 页面设计 → 发布 → 用户参与
- [ ] 步骤 1: Admin 创建活动
- [ ] 步骤 2: 设计活动页面
- [ ] 步骤 3: 配置报名表单
- [ ] 步骤 4: 发布活动
- [ ] 步骤 5: H5 用户查看活动
- [ ] 步骤 6: H5 用户报名
- [ ] 步骤 7: Admin 查看报名统计

**集成场景 3**：申请分销 → 审批 → 推广 → 获得奖励 → 提现
- [ ] 步骤 1: H5 用户申请分销
- [ ] 步骤 2: Admin 审批通过
- [ ] 步骤 3: 分销员生成推广链接
- [ ] 步骤 4: 新用户通过链接注册
- [ ] 步骤 5: 分销员获得奖励
- [ ] 步骤 6: 分销员申请提现
- [ ] 步骤 7: Admin 审批提现
- [ ] 步骤 8: 分销员收到款项

**集成场景 4**：用户反馈 → Admin 审核 → 更新状态 → 用户查看
- [ ] 步骤 1: H5 用户提交反馈
- [ ] 步骤 2: Admin 查看反馈
- [ ] 步骤 3: Admin 回复反馈
- [ ] 步骤 4: Admin 更新状态为已解决
- [ ] 步骤 5: H5 用户查看反馈状态更新

#### 7.2 异常场景测试（2小时）

**网络异常**：
- [ ] 场景 7.2.1: 断网后重连
- [ ] 场景 7.2.2: 请求超时处理
- [ ] 场景 7.2.3: 服务器错误处理

**数据异常**：
- [ ] 场景 7.2.4: 空数据处理
- [ ] 场景 7.2.5: 大数据处理
- [ ] 场景 7.2.6: 特殊字符处理

**权限异常**：
- [ ] 场景 7.2.7: 无权限访问
- [ ] 场景 7.2.8: Token 过期
- [ ] 场景 7.2.9: 跨角色访问

#### 7.3 性能与兼容性测试（2小时）

**浏览器兼容性**：
- [ ] 场景 7.3.1: Chrome 最新版
- [ ] 场景 7.3.2: Firefox 最新版
- [ ] 场景 7.3.3: Safari 最新版
- [ ] 场景 7.3.4: Edge 最新版

**移动端兼容性**：
- [ ] 场景 7.3.5: iOS Safari
- [ ] 场景 7.3.6: Android Chrome
- [ ] 场景 7.3.7: 微信内置浏览器

**屏幕分辨率**：
- [ ] 场景 7.3.8: 1920x1080（桌面）
- [ ] 场景 7.3.9: 1366x768（笔记本）
- [ ] 场景 7.3.10: 375x812（手机）

---

## 📊 测试覆盖率目标

### 功能覆盖率

| 模块 | 总场景数 | 目标覆盖率 | 优先级 |
|------|---------|-----------|--------|
| 用户认证 | 25 | 100% | P0 |
| RBAC权限 | 15 | 100% | P0 |
| 品牌管理 | 10 | 100% | P1 |
| 活动管理 | 15 | 100% | P0 |
| 页面设计器 | 15 | 100% | P1 |
| 订单管理 | 15 | 100% | P0 |
| 核销管理 | 10 | 100% | P0 |
| 分销系统 | 20 | 100% | P1 |
| 提现管理 | 12 | 100% | P2 |
| 会员管理 | 10 | 100% | P1 |
| 海报生成 | 12 | 100% | P1 |
| 数据统计 | 10 | 100% | P2 |
| 反馈系统 | 15 | 100% | P1 |
| 安全审计 | 10 | 100% | P2 |
| 集成测试 | 20 | 100% | P0 |
| **总计** | **204** | **100%** | - |

---

## 🛠️ 测试环境准备

### 测试账号准备

| 账号类型 | 用户名 | 密码 | 角色 | 用途 |
|---------|--------|------|------|------|
| 平台管理员 | admin | 123456 | platform_admin | 测试管理员功能 |
| 品牌管理员 | brand_manager | 123456 | brand_admin | 测试品牌管理 |
| 分销员 | distributor | 123456 | distributor | 测试分销功能 |
| 普通用户 | user001 | 123456 | participant | 测试普通用户功能 |
| 测试用户 | test_user | 123456 | participant | 测试注册/登录 |

### 测试数据准备

**品牌数据**：
- 品牌 A：已启用，有 3 个活动
- 品牌 B：已启用，有 2 个活动

**活动数据**：
- 活动 1：进行中，可报名
- 活动 2：进行中，可报名
- 活动 3：已结束

**订单数据**：
- 订单 1：已支付，待核销
- 订单 2：已支付，已核销
- 订单 3：未支付

**分销数据**：
- 分销员 1：已通过，有下线
- 分销员 2：待审批

---

## 📅 测试时间安排

| 天数 | 日期 | 内容 | 时长 | 负责人 |
|------|------|------|------|--------|
| 第1天 | Day 1 | 阶段1：用户认证与基础功能 | 8小时 | AI Assistant |
| 第2天 | Day 2 | 阶段2：品牌与活动管理 | 8小时 | AI Assistant |
| 第3天 | Day 3 | 阶段3：订单与报名管理 | 8小时 | AI Assistant |
| 第4天 | Day 4 | 阶段4：分销系统 | 8小时 | AI Assistant |
| 第5天 | Day 5 | 阶段5：会员与海报系统 | 8小时 | AI Assistant |
| 第6天 | Day 6 | 阶段6：反馈系统与审计 | 4小时 | AI Assistant |
| 第7天 | Day 7 | 阶段7：集成测试与回归 | 8小时 | AI Assistant |
| **总计** | - | **全功能测试** | **52小时** | - |

---

## 📝 测试执行方式

### 测试工具

1. **Playwright MCP**：前端自动化测试
2. **curl**：后端 API 直接测试
3. **浏览器开发者工具**：调试和验证

### 测试记录

每个测试场景需要记录：
- 测试状态（通过/失败/阻塞）
- 测试结果截图
- API 响应数据
- 错误日志（如有）
- 备注说明

### 测试报告

每日测试结束后生成报告：
- 当日测试场景数
- 通过/失败/阻塞数
- 发现的问题清单
- 修复的问题清单
- 遗留问题
- 明日计划

---

## ⚠️ 风险与应对

| 风险 | 可能性 | 影响 | 应对措施 |
|------|--------|------|----------|
| 数据库表缺失 | 高 | 高 | 提前检查并创建表 |
| 后端服务不稳定 | 中 | 高 | 准备好重启脚本 |
| 前端页面加载慢 | 中 | 中 | 增加等待时间 |
| 测试数据污染 | 中 | 中 | 使用独立测试数据 |
| 权限配置错误 | 中 | 高 | 提前验证权限设置 |

---

## 🎯 验收标准

### 功能验收

- [ ] 所有 P0 优先级模块测试通过
- [ ] 核心业务流程（注册→报名→支付→核销）完整通过
- [ ] 所有发现的问题已修复并验证
- [ ] 无阻塞性 Bug

### 质量验收

- [ ] 测试覆盖率 ≥ 80%
- [ ] 严重 Bug 数 = 0
- [ ] 一般 Bug 数 ≤ 5
- [ ] 轻微 Bug 数 ≤ 10

### 文档验收

- [ ] 测试报告完整
- [ ] 问题清单清晰
- [ ] 修复记录完整
- [ ] 用户手册更新

---

## 📞 沟通机制

### 每日站会

- 时间：每天 09:00
- 内容：昨日进展、今日计划、阻塞问题
- 时长：15 分钟

### 问题升级

- 一般问题：当天解决
- 严重问题：4 小时内解决
- 阻塞问题：立即升级

---

## 📝 备注

1. **测试顺序**：按优先级 P0 → P1 → P2 顺序执行
2. **回归测试**：每修复一个问题后，进行相关功能回归测试
3. **数据隔离**：测试数据与生产数据完全隔离
4. **环境稳定**：测试期间保持环境稳定，避免部署新版本
5. **问题跟踪**：所有问题使用统一的问题跟踪系统

---

**计划创建时间**：2026-02-08 14:35  
**计划版本**：v1.0  
**总测试场景数**：204 个  
**预计总耗时**：52 小时（7 天）  
**测试负责人**：AI Assistant

---

## ✅ 准备开始测试？

请确认以下内容：

1. **测试环境已就绪**：
   - [ ] 后端服务运行正常
   - [ ] 前端服务运行正常
   - [ ] 数据库连接正常
   - [ ] 测试数据已准备

2. **测试账号已创建**：
   - [ ] 平台管理员账号
   - [ ] 品牌管理员账号
   - [ ] 分销员账号
   - [ ] 普通用户账号

3. **测试工具已准备**：
   - [ ] Playwright MCP 可用
   - [ ] curl 可用
   - [ ] 浏览器可用

**确认后，我将开始执行阶段 1 的测试。**

请选择：
- **A**：确认开始测试，从阶段 1 开始
- **B**：需要先准备测试环境
- **C**：调整测试计划
- **D**：其他需求
